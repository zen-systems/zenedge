c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00117000
[pmm] NUMA node 0: PFN 256-16496 (16217 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129828 KB (32457 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128
[ipc] initializing proxy driver...
[ipc] shared ring buffer at 0x02000000 initialized.
[ipc] DEBUG DUMP:
  Magic: 0x51DECA9E
  Head:  0x00000001
  Tail:  0x00000000
  Pending Packets:
    [0x00000000] Cmd: 0x00000001 Payload: 0xDEADBEEF
[ipc-sim] Consuming Packet:
  Cmd: 0x00000001
  Payload: 0xDEADBEEF
[ipc] DEBUG DUMP:
  Magic: 0x51DECA9E
  Head:  0x00000001
  Tail:  0x00000001

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2796us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6571us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2192us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 11559us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2155us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2182us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4337us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
502 | BOOT | 0 | 0 | -
2959 | BOOT | 0 | 0 | 0x00007EC9
4217 | BOOT | 0 | 0 | 0x0000C0DE
12716 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
13996 | UNKNOWN | 100 | 8 | 0x00001388
14462 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
15113 | UNKNOWN | 100 | 1 | 0x00000008
15827 | CONTRACT_APPLY | 1 | 0 | 0x00001388
16085 | MEM_ALLOC | 1 | 0 | 0x00000001
16209 | MEM_ALLOC | 1 | 0 | 0x00000001
16311 | MEM_ALLOC | 1 | 0 | 0x00000001
16415 | MEM_ALLOC | 1 | 0 | 0x00000001
16533 | MEM_EXCEED | 1 | 0 | 0x00000014
16736 | STATE_CHANGE | 1 | 0 | 0x00000001
16756 | MEM_ALLOC | 1 | 0 | 0x00000001
17355 | MEM_FREE | 1 | 0 | 0x00000001
17368 | MEM_FREE | 1 | 0 | 0x00000001
17375 | MEM_FREE | 1 | 0 | 0x00000001
17382 | MEM_FREE | 1 | 0 | 0x00000001
17388 | MEM_FREE | 1 | 0 | 0x00000001
17580 | JOB_SUBMIT | 1 | 0 | 0x00000003
17683 | STEP_START | 1 | 0 | -
20510 | STEP_END | 1 | 0 | 2796us
20850 | BUDGET_EXCEED | 1 | 0 | 0x00000AEC
20981 | STEP_START | 1 | 1 | -
27554 | STEP_END | 1 | 1 | 6571us
27734 | BUDGET_EXCEED | 1 | 1 | 0x000019AB
27756 | STEP_START | 1 | 2 | -
29948 | STEP_END | 1 | 2 | 2192us
30088 | BUDGET_EXCEED | 1 | 2 | 0x00000890
30185 | JOB_COMPLETE | 1 | 0 | -
30936 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
31073 | MEM_ALLOC | 2 | 1 | 0x00000001
31163 | MEM_ALLOC | 2 | 1 | 0x00000001
31246 | MEM_EXCEED | 2 | 0 | 0x0000000C
31343 | STATE_CHANGE | 2 | 0 | 0x00000001
31344 | MEM_ALLOC | 2 | 1 | 0x00000001
31581 | MEM_FREE | 2 | 1 | 0x00000001
31587 | MEM_FREE | 2 | 1 | 0x00000001
31593 | MEM_FREE | 2 | 1 | 0x00000001
31707 | JOB_SUBMIT | 2 | 0 | 0x00000002
31709 | STEP_START | 2 | 0 | -
33864 | STEP_END | 2 | 0 | 2155us
34005 | BUDGET_EXCEED | 2 | 0 | 0x0000086B
34007 | STEP_START | 2 | 1 | -
36190 | STEP_END | 2 | 1 | 2182us
36329 | BUDGET_EXCEED | 2 | 1 | 0x00000886
36398 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
[demo] timer ticks elapsed: 50 (expected ~50 at 100Hz)

--- Round Robin Scheduler Demo ---
[sched] initializing RR scheduler...
[vmm] new user PD at phys 0x0011B000 (virt 0xC011B000)
[vmm] kernel PD at phys 0x00101000 (virt 0xC0101000)
[vmm] kernel_pd[768] = 0x000000E3, new_pd[768] = 0x000000E3
SWCR3OK
SWCR3OK
[kmain] Scheduler active. Idle loop.
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00117000
[pmm] NUMA node 0: PFN 256-16496 (16217 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129828 KB (32457 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128
[ipc] initializing proxy driver...
[ipc] shared ring buffer at 0x02000000 initialized.
[ipc] DEBUG DUMP:
  Magic: 0x51DECA9E
  Head:  0x00000001
  Tail:  0x00000000
  Pending Packets:
    [0x00000000] Cmd: 0x00000001 Payload: 0xDEADBEEF
[ipc-sim] Consuming Packet:
  Cmd: 0x00000001
  Payload: 0xDEADBEEF
[ipc] DEBUG DUMP:
  Magic: 0x51DECA9E
  Head:  0x00000001
  Tail:  0x00000001

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2794us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6375us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2192us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 11361us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2184us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2206us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4390us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
390 | BOOT | 0 | 0 | -
2437 | BOOT | 0 | 0 | 0x00007EC9
3384 | BOOT | 0 | 0 | 0x0000C0DE
10323 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
11418 | UNKNOWN | 100 | 8 | 0x00001388
11771 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
12256 | UNKNOWN | 100 | 1 | 0x00000008
12811 | CONTRACT_APPLY | 1 | 0 | 0x00001388
13032 | MEM_ALLOC | 1 | 0 | 0x00000001
13135 | MEM_ALLOC | 1 | 0 | 0x00000001
13220 | MEM_ALLOC | 1 | 0 | 0x00000001
13308 | MEM_ALLOC | 1 | 0 | 0x00000001
13407 | MEM_EXCEED | 1 | 0 | 0x00000014
13577 | STATE_CHANGE | 1 | 0 | 0x00000001
13597 | MEM_ALLOC | 1 | 0 | 0x00000001
14103 | MEM_FREE | 1 | 0 | 0x00000001
14116 | MEM_FREE | 1 | 0 | 0x00000001
14123 | MEM_FREE | 1 | 0 | 0x00000001
14129 | MEM_FREE | 1 | 0 | 0x00000001
14135 | MEM_FREE | 1 | 0 | 0x00000001
14290 | JOB_SUBMIT | 1 | 0 | 0x00000003
14391 | STEP_START | 1 | 0 | -
17218 | STEP_END | 1 | 0 | 2794us
17513 | BUDGET_EXCEED | 1 | 0 | 0x00000AEA
17643 | STEP_START | 1 | 1 | -
24019 | STEP_END | 1 | 1 | 6375us
24182 | BUDGET_EXCEED | 1 | 1 | 0x000018E7
24200 | STEP_START | 1 | 2 | -
26393 | STEP_END | 1 | 2 | 2192us
26538 | BUDGET_EXCEED | 1 | 2 | 0x00000890
26634 | JOB_COMPLETE | 1 | 0 | -
27465 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
27618 | MEM_ALLOC | 2 | 1 | 0x00000001
27716 | MEM_ALLOC | 2 | 1 | 0x00000001
27803 | MEM_EXCEED | 2 | 0 | 0x0000000C
27897 | STATE_CHANGE | 2 | 0 | 0x00000001
27898 | MEM_ALLOC | 2 | 1 | 0x00000001
28137 | MEM_FREE | 2 | 1 | 0x00000001
28144 | MEM_FREE | 2 | 1 | 0x00000001
28150 | MEM_FREE | 2 | 1 | 0x00000001
28276 | JOB_SUBMIT | 2 | 0 | 0x00000002
28278 | STEP_START | 2 | 0 | -
30464 | STEP_END | 2 | 0 | 2184us
30609 | BUDGET_EXCEED | 2 | 0 | 0x00000888
30612 | STEP_START | 2 | 1 | -
32820 | STEP_END | 2 | 1 | 2206us
32972 | BUDGET_EXCEED | 2 | 1 | 0x0000089E
33042 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
[demo] timer ticks elapsed: 50 (expected ~50 at 100Hz)

--- Round Robin Scheduler Demo ---
[sched] initializing RR scheduler...
[vmm] new user PD at phys 0x0011B000 (virt 0xC011B000)
[vmm] kernel PD at phys 0x00101000 (virt 0xC0101000)
[vmm] kernel_pd[768] = 0x000000E3, new_pd[768] = 0x000000E3
SWCR3OK
SWCR3OK
[kmain] Scheduler active. Idle loop.
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00117000
[pmm] NUMA node 0: PFN 256-16496 (16217 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129828 KB (32457 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128
[ipc] initializing proxy driver...
[ipc] shared ring buffer at 0x02000000 initialized.
[ipc] DEBUG DUMP:
  Magic: 0x51DECA9E
  Head:  0x00000001
  Tail:  0x00000000
  Pending Packets:
    [0x00000000] Cmd: 0x00000001 Payload: 0xDEADBEEF
[ipc-sim] Consuming Packet:
  Cmd: 0x00000001
  Payload: 0xDEADBEEF
[ipc] DEBUG DUMP:
  Magic: 0x51DECA9E
  Head:  0x00000001
  Tail:  0x00000001

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2581us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6527us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2191us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 11299us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2209us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2213us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4422us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
422 | BOOT | 0 | 0 | -
2612 | BOOT | 0 | 0 | 0x00007EC9
3588 | BOOT | 0 | 0 | 0x0000C0DE
10507 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
11588 | UNKNOWN | 100 | 8 | 0x00001388
11933 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
12396 | UNKNOWN | 100 | 1 | 0x00000008
12928 | CONTRACT_APPLY | 1 | 0 | 0x00001388
13145 | MEM_ALLOC | 1 | 0 | 0x00000001
13240 | MEM_ALLOC | 1 | 0 | 0x00000001
13325 | MEM_ALLOC | 1 | 0 | 0x00000001
13409 | MEM_ALLOC | 1 | 0 | 0x00000001
13509 | MEM_EXCEED | 1 | 0 | 0x00000014
13677 | STATE_CHANGE | 1 | 0 | 0x00000001
13697 | MEM_ALLOC | 1 | 0 | 0x00000001
14191 | MEM_FREE | 1 | 0 | 0x00000001
14204 | MEM_FREE | 1 | 0 | 0x00000001
14212 | MEM_FREE | 1 | 0 | 0x00000001
14218 | MEM_FREE | 1 | 0 | 0x00000001
14224 | MEM_FREE | 1 | 0 | 0x00000001
14379 | JOB_SUBMIT | 1 | 0 | 0x00000003
14481 | STEP_START | 1 | 0 | -
17089 | STEP_END | 1 | 0 | 2581us
17357 | BUDGET_EXCEED | 1 | 0 | 0x00000A15
17478 | STEP_START | 1 | 1 | -
24005 | STEP_END | 1 | 1 | 6527us
24145 | BUDGET_EXCEED | 1 | 1 | 0x0000197F
24156 | STEP_START | 1 | 2 | -
26348 | STEP_END | 1 | 2 | 2191us
26486 | BUDGET_EXCEED | 1 | 2 | 0x0000088F
26575 | JOB_COMPLETE | 1 | 0 | -
27306 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
27442 | MEM_ALLOC | 2 | 1 | 0x00000001
27530 | MEM_ALLOC | 2 | 1 | 0x00000001
27613 | MEM_EXCEED | 2 | 0 | 0x0000000C
27797 | STATE_CHANGE | 2 | 0 | 0x00000001
27800 | MEM_ALLOC | 2 | 1 | 0x00000001
28068 | MEM_FREE | 2 | 1 | 0x00000001
28075 | MEM_FREE | 2 | 1 | 0x00000001
28081 | MEM_FREE | 2 | 1 | 0x00000001
28199 | JOB_SUBMIT | 2 | 0 | 0x00000002
28202 | STEP_START | 2 | 0 | -
30412 | STEP_END | 2 | 0 | 2209us
30553 | BUDGET_EXCEED | 2 | 0 | 0x000008A1
30556 | STEP_START | 2 | 1 | -
32770 | STEP_END | 2 | 1 | 2213us
32927 | BUDGET_EXCEED | 2 | 1 | 0x000008A5
32994 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
[demo] timer ticks elapsed: 50 (expected ~50 at 100Hz)

--- Round Robin Scheduler Demo ---
[sched] initializing RR scheduler...
[vmm] new user PD at phys 0x0011B000 (virt 0xC011B000)
[vmm] kernel PD at phys 0x00101000 (virt 0xC0101000)
[vmm] kernel_pd[768] = 0x000000E3, new_pd[768] = 0x000000E3
SWCR3OK
SWCR3OK
[kmain] Scheduler active. Idle loop.
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
qemu-system-i386: terminating on signal 15 from pid 27567 (<unknown process>)
