c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00118000
[pmm] NUMA node 0: PFN 256-16496 (16216 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129824 KB (32456 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2368us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6571us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2207us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 11146us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2230us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2182us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4412us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
530 | BOOT | 0 | 0 | -
3033 | BOOT | 0 | 0 | 0x00007EC8
4190 | BOOT | 0 | 0 | 0x0000C0DE
10744 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
11872 | UNKNOWN | 100 | 8 | 0x00001388
12328 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
13015 | UNKNOWN | 100 | 1 | 0x00000008
13721 | CONTRACT_APPLY | 1 | 0 | 0x00001388
14419 | MEM_ALLOC | 1 | 0 | 0x00000001
14550 | MEM_ALLOC | 1 | 0 | 0x00000001
14635 | MEM_ALLOC | 1 | 0 | 0x00000001
14697 | MEM_ALLOC | 1 | 0 | 0x00000001
14770 | MEM_EXCEED | 1 | 0 | 0x00000014
15011 | STATE_CHANGE | 1 | 0 | 0x00000001
15032 | MEM_ALLOC | 1 | 0 | 0x00000001
15734 | MEM_FREE | 1 | 0 | 0x00000001
15753 | MEM_FREE | 1 | 0 | 0x00000001
15760 | MEM_FREE | 1 | 0 | 0x00000001
15767 | MEM_FREE | 1 | 0 | 0x00000001
15774 | MEM_FREE | 1 | 0 | 0x00000001
15983 | JOB_SUBMIT | 1 | 0 | 0x00000003
16087 | STEP_START | 1 | 0 | -
18486 | STEP_END | 1 | 0 | 2368us
18886 | BUDGET_EXCEED | 1 | 0 | 0x00000940
19018 | STEP_START | 1 | 1 | -
25592 | STEP_END | 1 | 1 | 6571us
25860 | BUDGET_EXCEED | 1 | 1 | 0x000019AB
25879 | STEP_START | 1 | 2 | -
28087 | STEP_END | 1 | 2 | 2207us
28359 | BUDGET_EXCEED | 1 | 2 | 0x0000089F
28500 | JOB_COMPLETE | 1 | 0 | -
29497 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
29664 | MEM_ALLOC | 2 | 1 | 0x00000001
29784 | MEM_ALLOC | 2 | 1 | 0x00000001
29854 | MEM_EXCEED | 2 | 0 | 0x0000000C
30284 | STATE_CHANGE | 2 | 0 | 0x00000001
30286 | MEM_ALLOC | 2 | 1 | 0x00000001
30482 | MEM_FREE | 2 | 1 | 0x00000001
30490 | MEM_FREE | 2 | 1 | 0x00000001
30497 | MEM_FREE | 2 | 1 | 0x00000001
30608 | JOB_SUBMIT | 2 | 0 | 0x00000002
30611 | STEP_START | 2 | 0 | -
32842 | STEP_END | 2 | 0 | 2230us
32992 | BUDGET_EXCEED | 2 | 0 | 0x000008B6
32996 | STEP_START | 2 | 1 | -
35179 | STEP_END | 2 | 1 | 2182us
35316 | BUDGET_EXCEED | 2 | 1 | 0x00000886
35384 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
[demo] timer ticks elapsed: 50 (expected ~50 at 100Hz)

--- Round Robin Scheduler Demo ---
[sched] initializing RR scheduler...
[vmm] new user PD at phys 0x0011B000 (virt 0xC011B000)
[vmm] kernel PD at phys 0x00101000 (virt 0xC0101000)
[vmm] kernel_pd[768] = 0x000000E3, new_pd[768] = 0x000000E3
SWCR3OK
SWCR3OK
[kmain] Scheduler active. Idle loop.
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00118000
[pmm] NUMA node 0: PFN 256-16496 (16216 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129824 KB (32456 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2310us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6621us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2187us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 11118us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2215us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2192us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4407us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
414 | BOOT | 0 | 0 | -
2542 | BOOT | 0 | 0 | 0x00007EC8
3652 | BOOT | 0 | 0 | 0x0000C0DE
9435 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
10397 | UNKNOWN | 100 | 8 | 0x00001388
10763 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
11337 | UNKNOWN | 100 | 1 | 0x00000008
11910 | CONTRACT_APPLY | 1 | 0 | 0x00001388
12606 | MEM_ALLOC | 1 | 0 | 0x00000001
12764 | MEM_ALLOC | 1 | 0 | 0x00000001
12841 | MEM_ALLOC | 1 | 0 | 0x00000001
12890 | MEM_ALLOC | 1 | 0 | 0x00000001
12950 | MEM_EXCEED | 1 | 0 | 0x00000014
13168 | STATE_CHANGE | 1 | 0 | 0x00000001
13188 | MEM_ALLOC | 1 | 0 | 0x00000001
13800 | MEM_FREE | 1 | 0 | 0x00000001
13814 | MEM_FREE | 1 | 0 | 0x00000001
13821 | MEM_FREE | 1 | 0 | 0x00000001
13828 | MEM_FREE | 1 | 0 | 0x00000001
13835 | MEM_FREE | 1 | 0 | 0x00000001
14024 | JOB_SUBMIT | 1 | 0 | 0x00000003
14129 | STEP_START | 1 | 0 | -
16463 | STEP_END | 1 | 0 | 2310us
16818 | BUDGET_EXCEED | 1 | 0 | 0x00000906
16945 | STEP_START | 1 | 1 | -
23568 | STEP_END | 1 | 1 | 6621us
23768 | BUDGET_EXCEED | 1 | 1 | 0x000019DD
23784 | STEP_START | 1 | 2 | -
25972 | STEP_END | 1 | 2 | 2187us
26125 | BUDGET_EXCEED | 1 | 2 | 0x0000088B
26236 | JOB_COMPLETE | 1 | 0 | -
27279 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
27444 | MEM_ALLOC | 2 | 1 | 0x00000001
27580 | MEM_ALLOC | 2 | 1 | 0x00000001
27649 | MEM_EXCEED | 2 | 0 | 0x0000000C
28101 | STATE_CHANGE | 2 | 0 | 0x00000001
28103 | MEM_ALLOC | 2 | 1 | 0x00000001
28335 | MEM_FREE | 2 | 1 | 0x00000001
28343 | MEM_FREE | 2 | 1 | 0x00000001
28350 | MEM_FREE | 2 | 1 | 0x00000001
28470 | JOB_SUBMIT | 2 | 0 | 0x00000002
28473 | STEP_START | 2 | 0 | -
30689 | STEP_END | 2 | 0 | 2215us
30844 | BUDGET_EXCEED | 2 | 0 | 0x000008A7
30847 | STEP_START | 2 | 1 | -
33041 | STEP_END | 2 | 1 | 2192us
33187 | BUDGET_EXCEED | 2 | 1 | 0x00000890
33260 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
[demo] timer ticks elapsed: 50 (expected ~50 at 100Hz)

--- Round Robin Scheduler Demo ---
[sched] initializing RR scheduler...
[vmm] new user PD at phys 0x0011B000 (virt 0xC011B000)
[vmm] kernel PD at phys 0x00101000 (virt 0xC0101000)
[vmm] kernel_pd[768] = 0x000000E3, new_pd[768] = 0x000000E3
SWCR3OK
SWCR3OK
[kmain] Scheduler active. Idle loop.
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00118000
[pmm] NUMA node 0: PFN 256-16496 (16216 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129824 KB (32456 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2335us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6505us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2196us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 11036us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2188us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2186us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4374us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
403 | BOOT | 0 | 0 | -
2541 | BOOT | 0 | 0 | 0x00007EC8
3528 | BOOT | 0 | 0 | 0x0000C0DE
9331 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
10285 | UNKNOWN | 100 | 8 | 0x00001388
10647 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
11143 | UNKNOWN | 100 | 1 | 0x00000008
11677 | CONTRACT_APPLY | 1 | 0 | 0x00001388
12334 | MEM_ALLOC | 1 | 0 | 0x00000001
12446 | MEM_ALLOC | 1 | 0 | 0x00000001
12519 | MEM_ALLOC | 1 | 0 | 0x00000001
12575 | MEM_ALLOC | 1 | 0 | 0x00000001
12673 | MEM_EXCEED | 1 | 0 | 0x00000014
12907 | STATE_CHANGE | 1 | 0 | 0x00000001
12927 | MEM_ALLOC | 1 | 0 | 0x00000001
13535 | MEM_FREE | 1 | 0 | 0x00000001
13548 | MEM_FREE | 1 | 0 | 0x00000001
13555 | MEM_FREE | 1 | 0 | 0x00000001
13562 | MEM_FREE | 1 | 0 | 0x00000001
13569 | MEM_FREE | 1 | 0 | 0x00000001
13768 | JOB_SUBMIT | 1 | 0 | 0x00000003
13874 | STEP_START | 1 | 0 | -
16245 | STEP_END | 1 | 0 | 2335us
16637 | BUDGET_EXCEED | 1 | 0 | 0x0000091F
16769 | STEP_START | 1 | 1 | -
23275 | STEP_END | 1 | 1 | 6505us
23458 | BUDGET_EXCEED | 1 | 1 | 0x00001969
23472 | STEP_START | 1 | 2 | -
25668 | STEP_END | 1 | 2 | 2196us
25809 | BUDGET_EXCEED | 1 | 2 | 0x00000894
25902 | JOB_COMPLETE | 1 | 0 | -
26782 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
26930 | MEM_ALLOC | 2 | 1 | 0x00000001
27065 | MEM_ALLOC | 2 | 1 | 0x00000001
27129 | MEM_EXCEED | 2 | 0 | 0x0000000C
27572 | STATE_CHANGE | 2 | 0 | 0x00000001
27574 | MEM_ALLOC | 2 | 1 | 0x00000001
27778 | MEM_FREE | 2 | 1 | 0x00000001
27786 | MEM_FREE | 2 | 1 | 0x00000001
27793 | MEM_FREE | 2 | 1 | 0x00000001
27910 | JOB_SUBMIT | 2 | 0 | 0x00000002
27912 | STEP_START | 2 | 0 | -
30100 | STEP_END | 2 | 0 | 2188us
30244 | BUDGET_EXCEED | 2 | 0 | 0x0000088C
30246 | STEP_START | 2 | 1 | -
32434 | STEP_END | 2 | 1 | 2186us
32585 | BUDGET_EXCEED | 2 | 1 | 0x0000088A
32661 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
[demo] timer ticks elapsed: 50 (expected ~50 at 100Hz)

--- Round Robin Scheduler Demo ---
[sched] initializing RR scheduler...
[vmm] new user PD at phys 0x0011B000 (virt 0xC011B000)
[vmm] kernel PD at phys 0x00101000 (virt 0xC0101000)
[vmm] kernel_pd[768] = 0x000000E3, new_pd[768] = 0x000000E3
SWCR3OK
SWCR3OK
[kmain] Scheduler active. Idle loop.
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00118000
[pmm] NUMA node 0: PFN 256-16496 (16216 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129824 KB (32456 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2852us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6671us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2319us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 11842us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2190us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2189us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4379us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
427 | BOOT | 0 | 0 | -
3064 | BOOT | 0 | 0 | 0x00007EC8
3994 | BOOT | 0 | 0 | 0x0000C0DE
10184 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
11216 | UNKNOWN | 100 | 8 | 0x00001388
11599 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
12107 | UNKNOWN | 100 | 1 | 0x00000008
12799 | CONTRACT_APPLY | 1 | 0 | 0x00001388
13471 | MEM_ALLOC | 1 | 0 | 0x00000001
13589 | MEM_ALLOC | 1 | 0 | 0x00000001
13656 | MEM_ALLOC | 1 | 0 | 0x00000001
13702 | MEM_ALLOC | 1 | 0 | 0x00000001
13760 | MEM_EXCEED | 1 | 0 | 0x00000014
13963 | STATE_CHANGE | 1 | 0 | 0x00000001
13983 | MEM_ALLOC | 1 | 0 | 0x00000001
14582 | MEM_FREE | 1 | 0 | 0x00000001
14595 | MEM_FREE | 1 | 0 | 0x00000001
14602 | MEM_FREE | 1 | 0 | 0x00000001
14609 | MEM_FREE | 1 | 0 | 0x00000001
14616 | MEM_FREE | 1 | 0 | 0x00000001
14819 | JOB_SUBMIT | 1 | 0 | 0x00000003
14926 | STEP_START | 1 | 0 | -
17811 | STEP_END | 1 | 0 | 2852us
18199 | BUDGET_EXCEED | 1 | 0 | 0x00000B24
18330 | STEP_START | 1 | 1 | -
25002 | STEP_END | 1 | 1 | 6671us
25204 | BUDGET_EXCEED | 1 | 1 | 0x00001A0F
25219 | STEP_START | 1 | 2 | -
27541 | STEP_END | 1 | 2 | 2319us
27710 | BUDGET_EXCEED | 1 | 2 | 0x0000090F
27827 | JOB_COMPLETE | 1 | 0 | -
28788 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
28947 | MEM_ALLOC | 2 | 1 | 0x00000001
29084 | MEM_ALLOC | 2 | 1 | 0x00000001
29153 | MEM_EXCEED | 2 | 0 | 0x0000000C
29616 | STATE_CHANGE | 2 | 0 | 0x00000001
29618 | MEM_ALLOC | 2 | 1 | 0x00000001
29836 | MEM_FREE | 2 | 1 | 0x00000001
29844 | MEM_FREE | 2 | 1 | 0x00000001
29851 | MEM_FREE | 2 | 1 | 0x00000001
29980 | JOB_SUBMIT | 2 | 0 | 0x00000002
29983 | STEP_START | 2 | 0 | -
32175 | STEP_END | 2 | 0 | 2190us
32323 | BUDGET_EXCEED | 2 | 0 | 0x0000088E
32327 | STEP_START | 2 | 1 | -
34518 | STEP_END | 2 | 1 | 2189us
34658 | BUDGET_EXCEED | 2 | 1 | 0x0000088D
34727 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
[demo] timer ticks elapsed: 50 (expected ~50 at 100Hz)

--- Round Robin Scheduler Demo ---
[sched] initializing RR scheduler...
[vmm] new user PD at phys 0x0011B000 (virt 0xC011B000)
[vmm] kernel PD at phys 0x00101000 (virt 0xC0101000)
[vmm] kernel_pd[768] = 0x000000E3, new_pd[768] = 0x000000E3
SWCR3OK
SWCR3OK
[kmain] Scheduler active. Idle loop.
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00118000
[pmm] NUMA node 0: PFN 256-16496 (16216 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129824 KB (32456 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2284us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6437us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2223us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 10944us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2164us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2186us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4350us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
503 | BOOT | 0 | 0 | -
2853 | BOOT | 0 | 0 | 0x00007EC8
4030 | BOOT | 0 | 0 | 0x0000C0DE
11471 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
12714 | UNKNOWN | 100 | 8 | 0x00001388
13245 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
13935 | UNKNOWN | 100 | 1 | 0x00000008
14617 | CONTRACT_APPLY | 1 | 0 | 0x00001388
15274 | MEM_ALLOC | 1 | 0 | 0x00000001
15394 | MEM_ALLOC | 1 | 0 | 0x00000001
15461 | MEM_ALLOC | 1 | 0 | 0x00000001
15507 | MEM_ALLOC | 1 | 0 | 0x00000001
15572 | MEM_EXCEED | 1 | 0 | 0x00000014
15788 | STATE_CHANGE | 1 | 0 | 0x00000001
15808 | MEM_ALLOC | 1 | 0 | 0x00000001
16443 | MEM_FREE | 1 | 0 | 0x00000001
16456 | MEM_FREE | 1 | 0 | 0x00000001
16463 | MEM_FREE | 1 | 0 | 0x00000001
16470 | MEM_FREE | 1 | 0 | 0x00000001
16477 | MEM_FREE | 1 | 0 | 0x00000001
16895 | JOB_SUBMIT | 1 | 0 | 0x00000003
17007 | STEP_START | 1 | 0 | -
19325 | STEP_END | 1 | 0 | 2284us
19716 | BUDGET_EXCEED | 1 | 0 | 0x000008EC
19843 | STEP_START | 1 | 1 | -
26282 | STEP_END | 1 | 1 | 6437us
26467 | BUDGET_EXCEED | 1 | 1 | 0x00001925
26478 | STEP_START | 1 | 2 | -
28703 | STEP_END | 1 | 2 | 2223us
28842 | BUDGET_EXCEED | 1 | 2 | 0x000008AF
28931 | JOB_COMPLETE | 1 | 0 | -
29728 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
29861 | MEM_ALLOC | 2 | 1 | 0x00000001
29979 | MEM_ALLOC | 2 | 1 | 0x00000001
30040 | MEM_EXCEED | 2 | 0 | 0x0000000C
30477 | STATE_CHANGE | 2 | 0 | 0x00000001
30479 | MEM_ALLOC | 2 | 1 | 0x00000001
30675 | MEM_FREE | 2 | 1 | 0x00000001
30683 | MEM_FREE | 2 | 1 | 0x00000001
30689 | MEM_FREE | 2 | 1 | 0x00000001
30798 | JOB_SUBMIT | 2 | 0 | 0x00000002
30800 | STEP_START | 2 | 0 | -
32967 | STEP_END | 2 | 0 | 2164us
33389 | BUDGET_EXCEED | 2 | 0 | 0x00000874
33392 | STEP_START | 2 | 1 | -
35580 | STEP_END | 2 | 1 | 2186us
35721 | BUDGET_EXCEED | 2 | 1 | 0x0000088A
35791 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
[demo] timer ticks elapsed: 50 (expected ~50 at 100Hz)

--- Round Robin Scheduler Demo ---
[sched] initializing RR scheduler...
[vmm] new user PD at phys 0x0011B000 (virt 0xC011B000)
[vmm] kernel PD at phys 0x00101000 (virt 0xC0101000)
[vmm] kernel_pd[768] = 0x000000E3, new_pd[768] = 0x000000E3
SWCR3OK
SWCR3OK
[kmain] Scheduler active. Idle loop.
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
[USER] Hello from User Space!
c[?7l[2J[0mSeaBIOS (version rel-1.17.0-0-gb52ca86e094d-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+06FD1EC0+06F31EC0 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from Hard Disk...
Boot failed: could not read the boot disk

Booting from Floppy...
Boot failed: could not read the boot disk

Booting from DVD/CD...
[0;30;47mWelcome to GRUB!

[01;01H[0m[2J  Booting `ZENEDGE Kernel'

ZE>PSVMHH
KM
ZENEDGE kernel booting...
AI + Edge Computing Kernel Playground

[time] initializing time subsystem
[time] using assumed 1000 MHz CPU frequency
[time] init complete
[trace] flight recorder initialized (256 event ring buffer)
[pmm] initializing physical memory manager
[pmm] mboot at 0x00010000, flags=0x00001A67
[pmm] parsing memory map...
[pmm] found 6 memory regions
[pmm] kernel: phys 0x00100000 - 0x00118000
[pmm] NUMA node 0: PFN 256-16496 (16216 free)
[pmm] NUMA node 1: PFN 16496-32736 (16240 free)
[pmm] total memory: 130944 KB (32736 pages)
[pmm] free memory: 129824 KB (32456 pages)
[pmm] init complete
[vmm] initializing virtual memory manager
[vmm] current page directory at 0x00101000
[vmm] paging enabled, kernel at 0xC0000000 (boot mapped 128MB using PSE)
[vmm] init complete
[gdt] initializing GDT with TSS...
[gdt] GDT loaded, TSS installed
[idt] initializing IDT...
[idt] IDT loaded with 32 exceptions + 16 IRQs + syscall
[pic] remapping IRQs to vectors 32-47...
[pic] PIC initialized, all IRQs masked
[pit] configuring timer at 100 Hz
[pit] timer configured, IRQ0 unmasked
[kmain] enabling interrupts...
[syscall] registering syscall handler on vector 128

=== MEMORY MAP ===
REGION | BASE       | LENGTH     | TYPE
-------|------------|------------|------------
0      | 0x00000000 | 0x0009FC00 | Available
1      | 0x0009FC00 | 0x00000400 | Reserved
2      | 0x000F0000 | 0x00010000 | Reserved
3      | 0x00100000 | 0x07EE0000 | Available
4      | 0x07FE0000 | 0x00020000 | Reserved
5      | 0xFFFC0000 | 0x00040000 | Reserved

=== NUMA TOPOLOGY ===
Node 0: 64864 KB free / 64960 KB total
Node 1: 64960 KB free / 64960 KB total
=== END MAP ===

[contracts] init
[sched] init

--- Demo 0: Tensor Metadata & Admission Control ---
[test] Job memory metrics:
  total_memory_kb: 12
  peak_memory_kb: 8
  pinned_memory_kb: 4
[contracts] applying contract for job 100
[contracts] priority=HIGH, node=1, cpu_budget=50000us, mem_budget=64KB
[test] Admission check (generous budget):
[admit] checking job 100 against contract for job 100
[admit] job peak memory: 8KB, contract budget: 64KB
[admit] estimated CPU: 5000us, budget: 50000us
[admit] job 100 ADMITTED
  result: OK
[contracts] applying contract for job 101
[contracts] priority=LOW, node=1, cpu_budget=1000us, mem_budget=4KB
[test] Admission check (tight budget):
[admit] checking job 100 against contract for job 101
[admit] job peak memory: 8KB, contract budget: 4KB
[admit] REJECTED: memory budget exceeded
  result: REJECT_MEMORY

--- Demo 1: REALTIME priority job (node 0) ---
[contracts] applying contract for job 1
[contracts] priority=REALTIME, node=0, cpu_budget=5000us, mem_budget=16KB
[test] allocating 5 pages via contract...
  page 0 @ node 0
  page 1 @ node 0
  page 2 @ node 0
  page 3 @ node 0
[contracts] job 1 state: OK -> WARNED
  page 4 @ node 0
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=20/16KB
[test] freeing pages...
[sched] run_job begin (budget: 5000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2275us (limit: 1666us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 6909us (limit: 1666us)
[sched] executing step 2
[sched] BUDGET EXCEED: step 2 took 2361us (limit: 1666us)
[sched] no ready steps left
[sched] run_job end - 3 steps, 11545us CPU, 3 violations

--- Demo 2: LOW priority job (node 1) ---
[contracts] applying contract for job 2
[contracts] priority=LOW, node=1, cpu_budget=3000us, mem_budget=8KB
[test] allocating 3 pages via LOW contract...
  page 0 @ node 1
  page 1 @ node 1
[contracts] job 2 state: OK -> WARNED
  page 2 @ node 1
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=12/8KB
[sched] run_job begin (budget: 3000us)
[sched] executing step 0
[sched] BUDGET EXCEED: step 0 took 2188us (limit: 1500us)
[sched] executing step 1
[sched] BUDGET EXCEED: step 1 took 2183us (limit: 1500us)
[sched] no ready steps left
[sched] run_job end - 2 steps, 4371us CPU, 2 violations

--- Final Contract States ---
[contracts] Job 1: state=WARNED, cpu=0/5000us, mem=0/16KB
[contracts] Job 2: state=WARNED, cpu=0/3000us, mem=0/8KB

=== FLIGHT RECORDER DUMP ===
TIME(us)     | TYPE             | JOB  | STEP | EXTRA
-------------|------------------|------|------|--------
399 | BOOT | 0 | 0 | -
2476 | BOOT | 0 | 0 | 0x00007EC8
3404 | BOOT | 0 | 0 | 0x0000C0DE
8839 | CONTRACT_APPLY | 100 | 0 | 0x0000C350
9767 | UNKNOWN | 100 | 8 | 0x00001388
10111 | CONTRACT_APPLY | 101 | 0 | 0x000003E8
10573 | UNKNOWN | 100 | 1 | 0x00000008
11094 | CONTRACT_APPLY | 1 | 0 | 0x00001388
11732 | MEM_ALLOC | 1 | 0 | 0x00000001
11842 | MEM_ALLOC | 1 | 0 | 0x00000001
11905 | MEM_ALLOC | 1 | 0 | 0x00000001
11950 | MEM_ALLOC | 1 | 0 | 0x00000001
12005 | MEM_EXCEED | 1 | 0 | 0x00000014
12198 | STATE_CHANGE | 1 | 0 | 0x00000001
12218 | MEM_ALLOC | 1 | 0 | 0x00000001
12788 | MEM_FREE | 1 | 0 | 0x00000001
12800 | MEM_FREE | 1 | 0 | 0x00000001
12807 | MEM_FREE | 1 | 0 | 0x00000001
12814 | MEM_FREE | 1 | 0 | 0x00000001
12821 | MEM_FREE | 1 | 0 | 0x00000001
12999 | JOB_SUBMIT | 1 | 0 | 0x00000003
13101 | STEP_START | 1 | 0 | -
15410 | STEP_END | 1 | 0 | 2275us
15750 | BUDGET_EXCEED | 1 | 0 | 0x000008E3
15874 | STEP_START | 1 | 1 | -
22786 | STEP_END | 1 | 1 | 6909us
22990 | BUDGET_EXCEED | 1 | 1 | 0x00001AFD
23011 | STEP_START | 1 | 2 | -
25372 | STEP_END | 1 | 2 | 2361us
25519 | BUDGET_EXCEED | 1 | 2 | 0x00000939
25614 | JOB_COMPLETE | 1 | 0 | -
26522 | CONTRACT_APPLY | 2 | 0 | 0x00000BB8
26696 | MEM_ALLOC | 2 | 1 | 0x00000001
26833 | MEM_ALLOC | 2 | 1 | 0x00000001
26900 | MEM_EXCEED | 2 | 0 | 0x0000000C
27354 | STATE_CHANGE | 2 | 0 | 0x00000001
27356 | MEM_ALLOC | 2 | 1 | 0x00000001
27558 | MEM_FREE | 2 | 1 | 0x00000001
27566 | MEM_FREE | 2 | 1 | 0x00000001
27581 | MEM_FREE | 2 | 1 | 0x00000001
27697 | JOB_SUBMIT | 2 | 0 | 0x00000002
27700 | STEP_START | 2 | 0 | -
29889 | STEP_END | 2 | 0 | 2188us
30055 | BUDGET_EXCEED | 2 | 0 | 0x0000088C
30059 | STEP_START | 2 | 1 | -
32244 | STEP_END | 2 | 1 | 2183us
32416 | BUDGET_EXCEED | 2 | 1 | 0x00000887
32527 | JOB_COMPLETE | 2 | 0 | -
=== END DUMP (48 events) ===


--- Interrupt System Demo ---
[demo] waiting ~500ms for timer ticks...
qemu-system-i386: terminating on signal 15 from pid 22430 (<unknown process>)
